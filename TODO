* views should return a Response (possibly take one as an arg).

* Tear out exception handling and views from main application workings and use middleware.

* Make request/response objects thread-local to prepare for a realistic server environment.
